[flake8]
# =============================================================================
# Flake8 Configuration for PromptFinder
# =============================================================================
# Focused on catching real bugs, not style nitpicks.
# Last updated: December 13, 2025
# =============================================================================

max-line-length = 120
max-complexity = 15

# Exclude non-production directories
exclude =
    .venv,
    migrations,
    __pycache__,
    .git,
    staticfiles,
    node_modules,
    docs,
    archive,
    scripts,
    design-references

# =============================================================================
# Global ignores - Only truly project-wide style choices (5 codes max)
# =============================================================================
ignore =
    # W503: Line break before binary operator - conflicts with black formatter
    W503,
    # W504: Line break after binary operator - conflicts with black formatter
    W504,
    # E203: Whitespace before ':' - conflicts with black formatter for slices
    E203

# =============================================================================
# Per-file ignores - Context-specific exceptions
# =============================================================================
per-file-ignores =
    # __init__.py files often re-export modules
    __init__.py: F401

    # Settings files have specific Django patterns
    */settings.py: E501, E402, F401, W292
    */settings/*.py: E501, E402, F401, W292

    # Constants files have long description strings
    */constants.py: E501

    # Test files are more relaxed
    test_*.py: F401, E501, F841, E128, E301, E302, E303, W291, W292, W293
    */tests/*.py: F401, E501, F841, E128, E301, E302, E303, W291, W292, W293
    prompts/tests.py: F401

    # Management commands are utility scripts with relaxed requirements
    */management/commands/*.py: F401, F841, F541, E501, E128, E226, E302, E303, C901, W291, W292, W293

    # Views package init re-exports all views
    */views/__init__.py: F401

    # All views modules have common Django patterns
    */views/*.py: F401, F541, F811, F841, E261, E301, E303, E304, E501, C901, W291, W292, W293, W391

    # Admin has complex inline imports and long lines
    */admin.py: E402, E501, F401, F841, W291, W292, W293, W391, E261, E302, E303

    # Forms can have complex validation with unused vars
    */forms.py: F841, W291, W292, W293

    # About app (small, utility)
    about/*.py: F401, W292

    # Middleware has whitespace issues from editing
    */middleware.py: F841, W291, W292, W293

    # Models have whitespace from class definitions
    */models.py: F401, W291, W292, W293

    # Tasks files have long AI prompt template strings
    */tasks.py: E501, W291, W292, W293

    # Services have unused imports for future use and long lines
    */services/*.py: F401, F541, E501, C901, W291, W292, W293

    # Template tags are utility code
    */templatetags/*.py: E302, W292

    # URL files
    */urls.py: E501, W292
    */urls_*.py: E265, E501, W292

    # Legacy views_admin.py (transitional)
    prompts/views_admin.py: F401, F841
